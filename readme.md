# Описание проекта
## Описание общей логики
### Авторизация
Пользователь может зарегистрироваться, для регистрации необходимо ввести:</br> Имя (от 2 до 30 символов),</br> Адрес (от 2 до 100 символов),</br> Телефон (от 10 до 12 символов),</br> Email(формат email).</br>
Телефоны пользователей уникальны, при попытке ввести уже существующий телефон, выдается соответсвующая ошибка.</br>
Данные пользователя можно обновить, пользователя можно удалить, тогда удаляются и все его заказы.</br>
### Создание карточки товара
Все товары принадлежат конкретным категориям. Сначала необходимо создать категорию, указав ее имя (от 2 до 30 символов), имена категорий уникальны и не должны повторяться.
При попытке ввести существующее название, выдается сообщение об ошибке. </br>Потом можно создать товар, для этого указывается его имя (от 2 до 30 символов), цена (целое число), количество(целое число) и название категории. </br>
Можно узнать остаток товара на скаладе.</br>
Можно редактировать данные о товаре.</br>
Можно удалить товар.</br>
Можно удалить категорию товара, тогда все товары, принадлежащие ей также удаляются.</br>
### Создание заказа
Сначала пользователь должен создать заказ, после этого идет наполнение корзины, запросом с указанием номера заказа, номера товара и его количества. После того как все необходимые товары добавлены, заказ необходимо завершить соответсвующим запросом и он переходит в статус, 
когда становится доступен курьеру для доставки.</br>
### Доставка
Курьер может посмотреть все заказы, готовые к доставке. Выбрав заказ, отправляет запрос на доставку. Статус заказа в этот момент меняется на "В доставке", в базе Доставки проставляется время, когда была начата доставка.</br> 
Когда курьер завершил доставку, он отправляет соответствующий запрос. Статус заказа в этот момент меняется на "Доставлен", в базе Доставки проставляется время, когда доставка была завершена.</br>  
### Security
Для работы необходима авторизация, доступные роли (заранее созданные в БД):</br>
USER (username: user, password: test);</br>
ADMIN (username: admin, password: test);</br>
COURIER (username: courier, password: test);</br>
При создании нового пользователя, по умолчанию ему присваеватеся роль USER.
## Список URL реализованных в API
### Пользователь
Доступны только для авторизованных пользователей с ролями USER или ADMIN:</br>
POST  /api/people - создать пользователя:</br>
{"name":"Sasha", "address":"Moscow", "phone":"123456789123", "email": "asfs@dv.re", "password":"test"}</br>
PUT /api/people/{id} - обновить пользователя:</br>
{"name":"NewName", "address":"Moscow", "phone":"123456789123", "email": "asfs@dv.re", "password":"test"}</br>
DELETE /api/people/{id} - удалить пользователя</br>
POST /api/people/{id}/orders - создать у пользователя с id новый заказ</br>
Доступны только для авторизованных пользователей с ролью ADMIN:</br>
GET  /api/people - получить список всех пользователей</br>
GET  /api/people/{id} - получить информацию о пользователе по его id</br>
### Товары
Доступны только для авторизованных пользователей с ролью ADMIN:</br>
POST  /api/category - создать категорию товаров</br>
{"name":"Food"}<br>
DELETE /api/category/{id} - удалить категорию</br>
POST  /api/item - создать товар:</br>
{"itemName":"Cake", "price":100, "itemQuantity":10, "category": {"name":"Food"}}</br>
PUT /api/item/{id} - обновить товар:</br>
{"itemName":"CakeNew", "price":100, "itemQuantity":10, "category": {"name":"Food"}}</br>
DELETE /api/item/{id} - удалить товар</br>
GET  /api/item/{id}/quantity -узнать остаток товара на складе</br>
Доступны только для авторизованных пользователей с ролями USER или ADMIN:</br>
GET  /api/item - получить список всех товаров</br>
GET  /api/item/{id} - получить информацию о товаре по его id</br>
### Заказ
Доступны только для авторизованных пользователей с ролями USER или ADMIN:</br>
POST /api/people/{id}/orders - создать у пользователя с id новый заказ</br>
PUT /api/orders/{id}/:id/:quantity </br>
Параметры: "id" int (id товара), "quantity" int (количество товара) - добавить товар с указанным количеством в заказ</br>
GET  /api/orders/{id} - получить информацию о заказе по его id</br>
GET  /api/orders/owner/{id} - получить список заказов пользователя по его id</br>
PUT  /api/orders/{id}/created - установить у заказа статус - СОЗДАН</br>
GET  /api/orders/{id}/items - получить список товаров в заказе</br>
GET  /api/orders/{id}/status - узнать статус заказа</br>

### Доставка
Доступны только для авторизованных пользователей с ролями COURIER или ADMIN:</br>
GET  /api/delivery/orders - получить список заказов, готовых к доставке</br>
Доступны только для авторизованных пользователей с ролью COURIER:</br>
PUT  /api/delivery/{id}/start - начать доставку заказа</br>
PUT  /api/delivery/{id}/finish - завершить доставку заказа</br>